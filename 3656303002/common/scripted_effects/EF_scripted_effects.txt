USA_great_depression_level_down_hist = {
	if = {
		limit = { has_idea = great_depression_3 }
		custom_effect_tooltip = USA_great_depression_down_tt
		remove_ideas = great_depression_3
	}
	if = {
		limit = { has_idea = great_depression_hist_2 }
		custom_effect_tooltip = USA_great_depression_down_tt
		swap_ideas = {
			remove_idea = great_depression_hist_2
			add_idea = great_depression_3
		}
	}
	if = {
		limit = { has_idea = great_depression_hist }
		custom_effect_tooltip = USA_great_depression_down_tt
		swap_ideas = {
			remove_idea = great_depression_hist
			add_idea = great_depression_hist_2
		}
	}
}

NZL_national_guards_spawn_5 = {
	division_template = {
		is_locked = yes
		name = "National Guards"
		division_names_group = NZL_INF_01
		regiments = {
			infantry = { x = 0 y = 0 }
			infantry = { x = 0 y = 1 }
			infantry = { x = 0 y = 2 }
			
			infantry = { x = 1 y = 0 }
			infantry = { x = 1 y = 1 }
			infantry = { x = 1 y = 2 }
		}
	}
	random_owned_controlled_state = {
		create_unit = {
			division = " name = \"National Guards\" division_template = \"National Guards\" start_experience_factor = 0.0"
			owner = ROOT
		}
	}
	random_owned_controlled_state = {
		create_unit = {
			division = " name = \"National Guards\" division_template = \"National Guards\" start_experience_factor = 0.0"
			owner = ROOT
		}
	}
	random_owned_controlled_state = {
		create_unit = {
			division = " name = \"National Guards\" division_template = \"National Guards\" start_experience_factor = 0.0"
			owner = ROOT
		}
	}
	random_owned_controlled_state = {
		create_unit = {
			division = " name = \"National Guards\" division_template = \"National Guards\" start_experience_factor = 0.0"
			owner = ROOT
		}
	}
	random_owned_controlled_state = {
		create_unit = {
			division = " name = \"National Guards\" division_template = \"National Guards\" start_experience_factor = 0.0"
			owner = ROOT
		}
	}
}

NZL_maori_volunteers_spawn_5 = {
	division_template = {
		is_locked = yes
		name = "Maori Volunteers"
		division_names_group = NZL_INF_01
		regiments = {
			infantry = { x = 0 y = 0 }
			infantry = { x = 0 y = 1 }
			infantry = { x = 0 y = 2 }
			
			infantry = { x = 1 y = 0 }
			infantry = { x = 1 y = 1 }
			infantry = { x = 1 y = 2 }
		}
	}
	random_owned_controlled_state = {
		create_unit = {
			division = " name = \"Maori Volunteers\" division_template = \"Maori Volunteers\" start_experience_factor = 0.0"
			owner = ROOT
		}
	}
	random_owned_controlled_state = {
		create_unit = {
			division = " name = \"Maori Volunteers\" division_template = \"Maori Volunteers\" start_experience_factor = 0.0"
			owner = ROOT
		}
	}
	random_owned_controlled_state = {
		create_unit = {
			division = " name = \"Maori Volunteers\" division_template = \"Maori Volunteers\" start_experience_factor = 0.0"
			owner = ROOT
		}
	}
	random_owned_controlled_state = {
		create_unit = {
			division = " name = \"Maori Volunteers\" division_template = \"Maori Volunteers\" start_experience_factor = 0.0"
			owner = ROOT
		}
	}
	random_owned_controlled_state = {
		create_unit = {
			division = " name = \"Maori Volunteers\" division_template = \"Maori Volunteers\" start_experience_factor = 0.0"
			owner = ROOT
		}
	}
}

civil_war_punitive_action = {
	division_template = {
		name = "Anti-Exploit Punitive Brigade"
		priority = 1
		division_names_group = ENG_MAR_01
		is_locked = yes
		regiments = {
			infantry = { x = 0 y = 0 }
			infantry = { x = 0 y = 1 }
			infantry = { x = 0 y = 2 }

			infantry = { x = 1 y = 0 }
			infantry = { x = 1 y = 1 }
			infantry = { x = 1 y = 2 }

			infantry = { x = 2 y = 0 }
			artillery_brigade = { x = 2 y = 1 }
			artillery_brigade = { x = 2 y = 2 }
		}
		support = {
			engineer = { x = 0 y = 0 }
			recon = { x = 0 y = 1 }
			artillery = { x = 0 y = 2 }
		}
	}
	random_state = {
		limit = {
			is_capital = yes
			is_fully_controlled_by = PREV
		}
		create_unit = {
			division = "division_template = \"Anti-Exploit Punitive Brigade\" start_experience_factor = 1 start_equipment_factor = 1"
			owner = PREV
		}
		create_unit = {
			division = "division_template = \"Anti-Exploit Punitive Brigade\" start_experience_factor = 1 start_equipment_factor = 1"
			owner = PREV
		}
		create_unit = {
			division = "division_template = \"Anti-Exploit Punitive Brigade\" start_experience_factor = 1 start_equipment_factor = 1"
			owner = PREV
		}
		create_unit = {
			division = "division_template = \"Anti-Exploit Punitive Brigade\" start_experience_factor = 1 start_equipment_factor = 1"
			owner = PREV
		}
	}
	random_state = {
		limit = {
			is_in_home_area = yes
			is_fully_controlled_by = PREV
		}
		create_unit = {
			division = "division_template = \"Anti-Exploit Punitive Brigade\" start_experience_factor = 1 start_equipment_factor = 1"
			owner = PREV
		}
		create_unit = {
			division = "division_template = \"Anti-Exploit Punitive Brigade\" start_experience_factor = 1 start_equipment_factor = 1"
			owner = PREV
		}
		create_unit = {
			division = "division_template = \"Anti-Exploit Punitive Brigade\" start_experience_factor = 1 start_equipment_factor = 1"
			owner = PREV
		}
		create_unit = {
			division = "division_template = \"Anti-Exploit Punitive Brigade\" start_experience_factor = 1 start_equipment_factor = 1"
			owner = PREV
		}
	}
	random_state = {
		limit = {
			is_in_home_area = yes
			is_fully_controlled_by = PREV
		}
		create_unit = {
			division = "division_template = \"Anti-Exploit Punitive Brigade\" start_experience_factor = 1 start_equipment_factor = 1"
			owner = PREV
		}
		create_unit = {
			division = "division_template = \"Anti-Exploit Punitive Brigade\" start_experience_factor = 1 start_equipment_factor = 1"
			owner = PREV
		}
		create_unit = {
			division = "division_template = \"Anti-Exploit Punitive Brigade\" start_experience_factor = 1 start_equipment_factor = 1"
			owner = PREV
		}
		create_unit = {
			division = "division_template = \"Anti-Exploit Punitive Brigade\" start_experience_factor = 1 start_equipment_factor = 1"
			owner = PREV
		}
	}
	random_state = {
		limit = {
			is_in_home_area = yes
			is_fully_controlled_by = PREV
		}
		create_unit = {
			division = "division_template = \"Anti-Exploit Punitive Brigade\" start_experience_factor = 1 start_equipment_factor = 1"
			owner = PREV
		}
		create_unit = {
			division = "division_template = \"Anti-Exploit Punitive Brigade\" start_experience_factor = 1 start_equipment_factor = 1"
			owner = PREV
		}
		create_unit = {
			division = "division_template = \"Anti-Exploit Punitive Brigade\" start_experience_factor = 1 start_equipment_factor = 1"
			owner = PREV
		}
		create_unit = {
			division = "division_template = \"Anti-Exploit Punitive Brigade\" start_experience_factor = 1 start_equipment_factor = 1"
			owner = PREV
		}
	}
	random_state = {
		limit = {
			is_in_home_area = yes
			is_fully_controlled_by = PREV
		}
		create_unit = {
			division = "division_template = \"Anti-Exploit Punitive Brigade\" start_experience_factor = 1 start_equipment_factor = 1"
			owner = PREV
		}
		create_unit = {
			division = "division_template = \"Anti-Exploit Punitive Brigade\" start_experience_factor = 1 start_equipment_factor = 1"
			owner = PREV
		}
		create_unit = {
			division = "division_template = \"Anti-Exploit Punitive Brigade\" start_experience_factor = 1 start_equipment_factor = 1"
			owner = PREV
		}
		create_unit = {
			division = "division_template = \"Anti-Exploit Punitive Brigade\" start_experience_factor = 1 start_equipment_factor = 1"
			owner = PREV
		}
	}
}

reset_nat_ideas_ecodip = {
	clr_country_flag = natideas_economic_1_completed
	clr_country_flag = natideas_economic_2_completed
	clr_country_flag = natideas_economic_3_completed
	clr_country_flag = natideas_economic_4_completed
	clr_country_flag = natideas_economic_5_completed
	clr_country_flag = natideas_production_1_completed
	clr_country_flag = natideas_production_2_completed
	clr_country_flag = natideas_production_3_completed
	clr_country_flag = natideas_production_4_completed
	clr_country_flag = natideas_production_5_completed
	if = {
		limit = { 
			has_variable = ROOT.economic_decision_cost
		}
		clear_variable = ROOT.economic_decision_cost
		add_to_variable = {
			var = ROOT.economic_decision_cost
			value = 75
		}
	}
	remove_ideas = {
		nateconomic_1
		nateconomic_2
		nateconomic_3
		nateconomic_4
		nateconomic_5
		natproduction_1
		natproduction_2
		natproduction_3
		natproduction_4
		natproduction_5
	}
}

reset_nat_ideas_army = {
	clr_country_flag = natideas_quality_1_completed
	clr_country_flag = natideas_quality_2_completed
	clr_country_flag = natideas_quality_3_completed
	clr_country_flag = natideas_quality_4_completed
	clr_country_flag = natideas_quality_5_completed
	clr_country_flag = natideas_quantity_1_completed
	clr_country_flag = natideas_quantity_2_completed
	clr_country_flag = natideas_quantity_3_completed
	clr_country_flag = natideas_quantity_4_completed
	clr_country_flag = natideas_quantity_5_completed
	if = {
		limit = { 
			has_variable = ROOT.quantity_decision_cost
		}
		clear_variable = ROOT.quantity_decision_cost
		add_to_variable = {
			var = ROOT.quantity_decision_cost
			value = 75
		}
	}
	remove_ideas = {
		natquality_1
		natquality_2
		natquality_3
		natquality_4
		natquality_5
		natquantity_1
		natquantity_2
		natquantity_3
		natquantity_4
		natquantity_5
	}
}

SIA_japanese_pressure_level_down = {
	if = {
		limit = {
			has_idea = SIA_Japan_Pressure2
		}
		swap_ideas = {
			remove_idea = SIA_Japan_Pressure2
			add_idea = SIA_Japan_Pressure
		}
	}
	else_if = {
		limit = {
			has_idea = SIA_Japan_Pressure
		}
		swap_ideas = {
			remove_idea = SIA_Japan_Pressure
			add_idea = SIA_Japan_Pressure3
		}
	}
	else_if = {
		limit = {
			has_idea = SIA_Japan_Pressure3
		}
		remove_ideas = SIA_Japan_Pressure3
	}
}

SIA_japanese_pressure_level_down_alt = {
	if = {
		limit = {
			has_idea = SIA_Japan_Pressure2
		}
		swap_ideas = {
			remove_idea = SIA_Japan_Pressure2
			add_idea = SIA_Japan_Pressure3
		}
	}
	else_if = {
		limit = {
			has_idea = SIA_Japan_Pressure3
		}
		remove_ideas = SIA_Japan_Pressure3
	}
}

CYP_lower_great_depression_effect = {
	if = {
		limit = {
			has_idea = CYP_great_depression
		}
		swap_ideas = {
			remove_idea = CYP_great_depression
			add_idea = CYP_great_depression_2
		}
	}
	else_if = {
		limit = {
			has_idea = CYP_great_depression_2
		}
		swap_ideas = {
			remove_idea = CYP_great_depression_2
			add_idea = CYP_great_depression_3
		}
	}
	else_if = {
		limit = {
			has_idea = CYP_great_depression_3
		}
		remove_ideas = CYP_great_depression_3
		hidden_effect = {
			random_core_state = {
				prioritize = { 183 }
				limit = {
					is_fully_controlled_by = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}
}

store_every_controlled_states_on_game_start = { #Should be called from history file
	every_controlled_state = {
		ROOT = {
			add_to_array = {
				array = controlled_states_at_game_start
				value = PREV
			}
		}
	}
}

USA_modify_air_modifier = {
	if = {
		limit = { 
			has_dynamic_modifier = { modifier = USA_army_aircorps_modifier }
		}
		custom_effect_tooltip = USA_modify_aircorps_modifier_tt
	}
	else_if = {
		limit = { 
			has_dynamic_modifier = { modifier = USA_army_airforce_modifier }
		}
		custom_effect_tooltip = USA_modify_army_airforce_modifier_tt
	}
	if = {
		limit = {
			has_dynamic_modifier = { modifier = USA_airforce_modifier }
		}
		custom_effect_tooltip = USA_modify_airforce_modifier_tt
	}
	else_if = {
		limit = { 
			has_dynamic_modifier = { modifier = USA_airforce_communist_modifier }
		}
		custom_effect_tooltip = USA_modify_airforce_communist_modifier_tt
	}
	else_if = {
		limit = { 
			has_dynamic_modifier = { modifier = USA_airforce_confederate_modifier }
		}
		custom_effect_tooltip = USA_modify_airforce_confederate_modifier_tt
	}
}

USA_modify_army_modifier = {
	if = {
		limit = { 
			has_dynamic_modifier = { modifier = USA_army_modifier }
		}
		custom_effect_tooltip = USA_modify_army_modifier_tt
	}
	else_if = {
		limit = { 
			has_dynamic_modifier = { modifier = USA_army_communist_modifier }
		}
		custom_effect_tooltip = USA_modify_army_communist_modifier_tt
	}
	else_if = {
		limit = {
			has_dynamic_modifier = { modifier = USA_army_confederate_modifier }
		}
		custom_effect_tooltip = USA_modify_army_confederate_modifier_tt
	}
}

USA_modify_navy_modifier = {
	if = {
		limit = { 
			has_dynamic_modifier = { modifier = USA_navy_modifier }
		}
		custom_effect_tooltip = USA_modify_navy_modifier_tt
	}
	else_if = {
		limit = { 
			has_dynamic_modifier = { modifier = USA_navy_communist_modifier }
		}
		custom_effect_tooltip = USA_modify_navy_communist_modifier_tt
	}
	else_if = {
		limit = {
			has_dynamic_modifier = { modifier = USA_navy_confederate_modifier }
		}
		custom_effect_tooltip = USA_modify_navy_confederate_modifier_tt
	}
}
